# Monitoring & Analytics Strategy
# –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ ¬´–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç¬ª

## –û–±–∑–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –æ–±—É—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ò–ò-—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –æ–±—â–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

## üìä –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (KPIs)

### –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **Course Completion Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫—É—Ä—Å
- **Lesson Progress** - —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–∫–∞–º
- **Test Success Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- **Time to Completion** - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫—É—Ä—Å–∞
- **Drop-off Points** - –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —á–∞—â–µ –≤—Å–µ–≥–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ò–ò-—Å–µ—Ä–≤–∏—Å–æ–≤
- **AI Service Adoption** - –ø—Ä–æ—Ü–µ–Ω—Ç —É—á–∏—Ç–µ–ª–µ–π, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –∫–∞—Ç–∞–ª–æ–≥
- **Popular Services** - —Ç–æ–ø –ò–ò-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **Subject Distribution** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º
- **Service Engagement** - –∫–ª–∏–∫–∏, –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- **Page Load Times** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å SPA
- **API Response Times** - —Å–∫–æ—Ä–æ—Å—Ç—å Supabase queries
- **Error Rates** - —á–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
- **User Session Duration** - –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Phase 1: –ë–∞–∑–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (MVP)
```javascript
// Simple event tracking
const trackEvent = (event, properties) => {
  // Local analytics store –∏–ª–∏ simple API
  console.log('Analytics:', event, properties);
  
  // Supabase table –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è events
  supabase.from('analytics_events').insert({
    event_name: event,
    user_id: currentUser.id,
    properties: properties,
    timestamp: new Date()
  });
};

// Usage examples
trackEvent('course_lesson_completed', { 
  lesson_id: 'intro-1', 
  completion_time: 120 
});

trackEvent('ai_service_clicked', { 
  service_id: 'chatgpt', 
  subject: '–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞' 
});
```

### Database Schema
```sql
-- Analytics events table
CREATE TABLE analytics_events (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  event_name VARCHAR(100) NOT NULL,
  user_id UUID REFERENCES users(id),
  properties JSONB,
  timestamp TIMESTAMP DEFAULT NOW()
);

-- User sessions tracking
CREATE TABLE user_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  session_start TIMESTAMP DEFAULT NOW(),
  session_end TIMESTAMP,
  pages_visited INTEGER DEFAULT 0,
  actions_performed INTEGER DEFAULT 0
);
```

### Phase 2: Advanced Analytics (Post-MVP)
- Google Analytics 4 integration
- Custom dashboard –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- Real-time metrics
- Automated reports

## üìã Monitoring Dashboard –¥–ª—è –ê–¥–º–∏–Ω–æ–≤

### Admin Analytics Panel (–≤ —Ä–∞–º–∫–∞—Ö Story 1.5)
```javascript
// Dashboard components
const AnalyticsDashboard = () => {
  const { data: completionStats } = useQuery(['completion-stats'], getCompletionStats);
  const { data: serviceUsage } = useQuery(['service-usage'], getServiceUsage);
  
  return (
    <div className="analytics-dashboard">
      <MetricCard 
        title="Course Completion" 
        value={`${completionStats.percentage}%`}
        trend={completionStats.trend}
      />
      <ServiceUsageChart data={serviceUsage} />
      <RecentActivity />
    </div>
  );
};
```

## üîß Error Monitoring

### Error Tracking Strategy
```javascript
// Custom error boundary —Å reporting
class ErrorBoundary extends React.Component {
  componentDidCatch(error, errorInfo) {
    // Log to analytics
    trackEvent('application_error', {
      error: error.message,
      stack: error.stack,
      component: errorInfo.componentStack
    });
    
    // For production: Sentry –∏–ª–∏ similar service
  }
}

// API error tracking
const apiClient = {
  async request(url, options) {
    try {
      const response = await fetch(url, options);
      if (!response.ok) {
        trackEvent('api_error', {
          url,
          status: response.status,
          method: options.method
        });
      }
      return response;
    } catch (error) {
      trackEvent('network_error', { url, error: error.message });
      throw error;
    }
  }
};
```

## üìà Performance Monitoring

### Core Web Vitals Tracking
```javascript
// Performance monitoring
const trackPerformance = () => {
  // Core Web Vitals
  new PerformanceObserver((list) => {
    list.getEntries().forEach((entry) => {
      if (entry.entryType === 'navigation') {
        trackEvent('page_performance', {
          page: window.location.pathname,
          load_time: entry.loadEventEnd - entry.loadEventStart,
          dom_content_loaded: entry.domContentLoadedEventEnd - entry.domContentLoadedEventStart
        });
      }
    });
  }).observe({ entryTypes: ['navigation'] });
};
```

## üéØ Privacy & Compliance

### Data Privacy Principles
- **Minimal Data Collection** - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π –º–µ—Ç—Ä–∏–∫–∏
- **User Consent** - —è–≤–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ —Å–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **Data Anonymization** - –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ, –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **GDPR Compliance** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Privacy
```javascript
// Privacy-first analytics
const trackEventWithConsent = (event, properties) => {
  const hasConsent = localStorage.getItem('analytics-consent') === 'true';
  if (!hasConsent) return;
  
  // Remove PII from properties
  const sanitizedProperties = sanitizeData(properties);
  trackEvent(event, sanitizedProperties);
};
```

## üìã Implementation Priority

### High Priority (MVP)
1. ‚úÖ Basic event tracking –≤ Stories (—É–∂–µ –≤–∫–ª—é—á–µ–Ω–æ)
2. ‚úÖ Course completion analytics (Story 1.5)
3. ‚úÖ AI service usage tracking (Story 2.2)
4. Simple error logging

### Medium Priority (Post-MVP)
1. Performance monitoring
2. Real-time dashboard
3. Automated reports
4. Advanced error tracking (Sentry)

### Low Priority (Future)
1. A/B testing framework
2. Predictive analytics
3. Advanced user behavior analysis
4. Integration —Å –≤–Ω–µ—à–Ω–∏–º–∏ analytics tools

## üîó Integration Points

### –° —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ Stories:
- **Story 1.4 (Learning Center):** Course progress tracking
- **Story 1.5 (Admin Panel):** Analytics dashboard
- **Story 2.1 (AI Catalog User):** Service usage tracking  
- **Story 2.2 (AI Catalog Admin):** Service management analytics

### Dependencies:
```json
{
  "devDependencies": {
    "@types/web-vitals": "^3.0.0"
  },
  "dependencies": {
    "web-vitals": "^3.0.0"
  }
}
```

## ‚úÖ Success Criteria

**MVP Launch –≥–æ—Ç–æ–≤ –∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É –µ—Å–ª–∏:**
- ‚úÖ Basic event tracking —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Course completion metrics –¥–æ—Å—Ç—É–ø–Ω—ã –∞–¥–º–∏–Ω–∞–º
- ‚úÖ AI service usage –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ Critical errors –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- ‚úÖ Privacy compliance —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

*–≠—Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.*